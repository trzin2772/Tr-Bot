!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Bootstrapper=e():t.Bootstrapper=e()}(this,(()=>(()=>{"use strict";var t={147:t=>{t.exports=JSON.parse('{"name":"@sportdigi/bootstrapper","version":"8.5.0","description":"Gets everything ready for application start","main":"dist/bootstrapper.min.js","scripts":{"start":"webpack --config webpackDev.config.js && webpack-dev-server --config webpackDev.config.js ","build:cdn":"sportdigi-scripts build","build":"sportdigi-scripts build","prepack":"npm run build","prepare":"husky install","format":"pretty-quick --staged"},"files":["dist"],"license":"ISC","devDependencies":{"@sportdigi/scripts":"5.5.3","husky":"^8.0.0","prettier":"^2.7.1","pretty-quick":"^3.1.3","webpack-cli":"^5.0.1"},"browserslist":{"production":["Chrome >= 77","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')}},e={};function i(o){var n=e[o];if(void 0!==n)return n.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,i),a.exports}i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{i.d(o,{default:()=>z});var t={};i.r(t),i.d(t,{appendChild:()=>v,appendChildTo:()=>b,appendDivToBodyWithId:()=>f,createElement:()=>m,createElementLink:()=>c,createElementScript:()=>h,createScript:()=>p,createStyleSheet:()=>d,deepVal:()=>r,deepValWithBind:()=>l,documentCreateElement:()=>u,generateHash:()=>E,getAppsWithBetSlip:()=>T,isSafari:()=>n,kebabCase:()=>a,merge:()=>g,noop:()=>s,resetDefaultStyles:()=>w,select:()=>B,selectMainInstanceWithMultiDestroy:()=>S});const e=["EventWidget","TopMatches"],n=()=>/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);function a(t=""){return t.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}const s=()=>{},r=(t,e="")=>e.split(".").reduce(((t,e)=>t?t[e]:t),t),l=(t,e="")=>e.split(".").reduce(((t,e)=>{let i=t&&t[e];return i=i&&"function"==typeof i&&"object"==typeof t?i.bind(t):i,i}),t);function d(t){return c({href:t,rel:"stylesheet"})}function p(t){return h({src:t})}function c(t){return m("link",t)}function h(t){return m("script",t)}function m(t,e){return g(u(t),e)}const g=Object.assign;function u(){return document.createElement.apply(document,arguments)}function f(t){return b("body",m("div",{id:t}))}function b(t,e){return v(B(t),e)}function v(t,e){return t.appendChild(e),e}function B(t){return document.querySelector.apply(document,arguments)}function S(t,e,i=Function.prototype){const o=t[e];if(!o)return null;const n=Object.create(Object.getPrototypeOf(o)),a=Object.keys(t);return Object.assign(n,o,{changeColors(e){a.forEach((i=>{t[i].changeColors(e)}))},destroy(){a.forEach((e=>{t[e].destroy()})),i()}}),a.forEach((i=>{e!==i&&(n[i]=t[i])})),n}function w(t,e){Object.entries(e).forEach((([e,i])=>{t.style[e]=i||null}))}const y=({globalSettings:t})=>{const e=document.createElement("div");e.id="betslip-container-element",Object.assign(e.style,{position:"fixed",width:"100%",bottom:"0",zIndex:"9999"}),document.body.appendChild(e);const i={container:e,width:360,maxHeight:.8*window.innerHeight,minHeight:200,closeModeVariant:0,animated:!0,bookBetHide:!0,position:t.partner.BetslipPosition};return window.innerWidth>=1280||Object.assign(i,{width:null,maxHeight:null,minHeight:null,height:window.innerHeight,closeModeVariant:1,animated:!1,position:3,borderRadius:0,isMobile:!0}),{appConfig:i,bootConfig:{name:"Betslip"},method:"bootIframe",listen:{Betslip:{navigateToEvent:t=>{t.dispatch("closeBetSlip",null)},login:t=>{t.dispatch("closeBetSlip",null)}},TopMatches:{toggleStake:(t,{data:e})=>{t.dispatch("toggleStake",e)},toggleBetSlipVisibility:(t,{data:e})=>{e?(t.dispatch("closeBetSlip",null),t.dispatch("hideCloseMode",null)):t.dispatch("showCloseMode",null)},changeTheme:(t,{data:e})=>{t.dispatch("changeTheme",e)}},EventWidget:{toggleStake:(t,{data:e})=>{t.dispatch("toggleStake",e)}}}}},C=({login:t})=>{let e=!1,i=null;return{Betslip:{navigateToEvent:(t,{data:e})=>{const{fullName:i,id:o}=e;t.dispatch("navigateToEventFromBetSlip",{Id:o,Name:i,Status:0})},placeBetSuccess:t=>{t.dispatch("placeBetSuccess",null)},open:()=>{e=!0},close:()=>{e=!1},betSlipUpdate:(t,{data:o})=>{if(clearTimeout(i),o.betSlip.IsBetPlaced)i=setTimeout((()=>{t.dispatch("updatedSelectedStakes",[])}),e?3e3:0);else{var n,a;let e=null===(n=o.betSlip)||void 0===n||null===(a=n.StakesList)||void 0===a?void 0:a.map((({StakeId:t})=>t));t.dispatch("updatedSelectedStakes",e||[])}},login:t}}};function T(t){var i;const o=t.apps.some((t=>{var i;return e.includes(null==t||null===(i=t.bootConfig)||void 0===i?void 0:i.name)}));let n=t.apps;const a=t.apps.find((({bootConfig:t})=>"TopMatches"===(null==t?void 0:t.name)));a&&(a.bootConfig.newBetSlip=!1);const s=null===(i=t.globalSettings)||void 0===i?void 0:i.partner;return o&&(null==s||!s.EnableOldBetSlip)&&(null==s?void 0:s.Id)>=1e6&&(n=t.apps.map((i=>(e.includes(i.bootConfig.name)&&(i.listen=C({login:t.login})),i))),n.push(y({globalSettings:t.globalSettings,login:t.login}))),n}function E(t=10){let e="",i=0;for(;i<t;)e+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random())),i+=1;return e}class I{constructor(t){this.initProps(),this.postFix=t}initProps(){this.name="",this.postFix="",this.consoleTimeLabel=""}timeEnd(){console.timeEnd(`${this.consoleTimeLabel}`)}time(){console.time(`${this.consoleTimeLabel}`)}initTimeLabel(t=this.name){this.name=t;const e=this.postFix;this.consoleTimeLabel=`${t} ${e}`}}class M extends I{constructor(){super("config extracting"),this.initProps()}reset(){this.initProps()}initProps(){this.bootConfig={},this.bootableConfig={},this.name=null,this.url=null,this.urlWithVersion=null,this.indexHTMLUrl=null,this.indexHTML=null,this.globalSettings={},this.headElements=[],this.bodyElements=[],this.links=[],this.scripts=[]}extract(t,e){this.bootConfig=e,this.appConfig=t;const i=this.name=e.name;return this.appName=a(i),this.init(t.server)}async init(t){return this.initServer(t),this.initGlobalSettings(),this.initName(),this.initTimeLabel(),this.time(),this.initGlobalSettingsEnv(),this.initUrlWithVersion(),await this.initElements(),this.initConfig(),this.timeEnd(),this.bootableConfig||{}}initConfig(){this.bootableConfig={name:this.name,links:this.links,scripts:this.scripts,indexHTML:this.indexHTML,globalSettings:this.globalSettings,html:{head:this.headElements,body:this.bodyElements},urls:{base:this.url,index:this.indexHTMLUrl,version:this.urlWithVersion}}}async initElements(){const{urlWithVersion:t,appName:e}=this,i=`${t}/${e}.min.js`,o=[d(`${t}/${e}.min.css`)],n=[p(i)];this.assignToThis({headElements:o,bodyElements:n,links:o,scripts:n})}initGlobalSettings(){const{globalSettings:t}=this.appConfig;this.globalSettings=t}initUrlWithVersion(){let t=`https://${this.globalSettings.partner.CdnDomainName}/${this.appName}`,e=this.bootConfig.version||this.globalSettings.projects[this.appName],i=e?`${t}/${e}`:t;this.assignToThis({url:t,urlWithVersion:i})}initGlobalSettingsEnv(){let t=this.globalSettings,e=t.Env||(t.partner||{}).Env;this.assignToThis({globalSettingsEnv:e})}initName(){let t=this.bootConfig.name;this.assignToThis({name:t})}initServer(t){this.server=t}assignToThis(t){Object.assign(this,t)}destroy(){this.initProps()}}class O extends I{constructor(){super("loading"),this.initProps()}initProps(){super.initProps(),this.name="",this.debug=!1,this.loadableElements=[],this.loadingDone=!1,this.onLoadResolve=s,this.onLoadComplete=()=>{this.loadingDone=!0,this.timeEnd(),this.onLoadResolve(this)},this.bootableConfig=null}async load(t){return this.name=t.name,this.debug=t.debug,this.initTimeLabel(),this.time(),this.bootableConfig=t,this.loadingDone=!1,this.initLoadableElements(),new Promise(((t,e)=>{this.onLoadResolve=t;try{this.loadElements()}catch(t){e(t)}}))}loadElements(){this.loadLinks(),this.loadScriptsSync()}loadScriptsSync(t=this.bootableConfig.scripts){let e=t[0];this.loadScriptNext(e,t)}loadScriptNext(t,e=this.bootableConfig.scripts,i=0){if(!t)return this.onLoadComplete();t.onload=()=>{this.debug&&console.timeEnd(`script ${i}`),this.loadScriptNext(e[++i],e,i)},this.addScriptToDocument(t),this.debug&&console.time(`script ${i}`),this.callScriptOnloadManuallyIfIsNotLoadable(t)}callScriptOnloadManuallyIfIsNotLoadable(t){!this.loadableElements.includes(t)&&t.onload()}addScriptToDocument(t){t instanceof HTMLElement&&b(this.bootableConfig.html.head.includes(t)?"head":"body",t)}removeScripts(){((this.bootableConfig||{}).scripts||[]).forEach((t=>t.remove()))}loadLinks(){const t=document.head;this.bootableConfig.links.forEach((e=>t.insertBefore(e,t.firstChild)))}removeLinks(){((this.bootableConfig||{}).links||[]).forEach((t=>t.remove()))}initLoadableElements(){let t=this.bootableConfig.scripts.filter((t=>t.src));this.loadableElements=t}destroy(){this.removeLinks(),this.removeScripts(),this.initProps()}}class x{constructor(){this.initProps()}async start(t){return await this.callApplicationStartFunction(),this.afterLoadFunctions.forEach(Function.prototype.call),this}async setConfig(t){this.initProps(),this.parent=t,this.afterLoadFunctions=[],this.appConfig=t.appConfig,this.bootConfig=t.bootConfig,this.init(),await this.callApplicationSetConfigFunction()}get iframe(){return this.parent.iframe}initProps(){this.parent={},this.afterLoadFunctions=[],this.appConfig={},this.bootConfig={},this.appStarterImplemented=!1,this.hostObject={},this.appStarter={}}addEventListener(t,e){const i=this,o=this.iframe,n=this.bootConfig.name.toLowerCase();function a(o){if(!i.iframe)return window.removeEventListener("message",a);const s=o.data,r=s.sender&&s.sender!==n;s.type!==t||r||(i.iframe.contentWindow&&i.iframe.contentWindow.postMessage(o.data,"*"),e(s))}return o?window.addEventListener("message",a):this.callAppStarterMethod((()=>this.appStarter.addEventListener(t,e))),()=>this.removeEventListener(t,a)}removeEventListener(t,e){const i=this.iframe;i?i.removeEventListener(t,e):this.callAppStarterMethod((()=>this.appStarter.removeEventListener(t,e)))}dispatchEvent(t,e){const i=this.iframe;if(!this.bootConfig.name)return;const o=this.bootConfig.name.toLowerCase();if(i){const n=i.contentWindow;n&&n.postMessage({data:e,sender:"bootstrapper",receiver:o,type:t},"*")}else this.callAppStarterMethod((()=>this.appStarter.dispatchEvent(t,e)))}callAppStarterMethod(t){void 0===this.appStarterImplemented?this.afterLoadFunctions.push(t):this.appStarterImplemented?t():console.warn("%cAppStarter is not implemented. For messaging system please implement `@sportdigi/app-starter` in your application.","color: orange")}async callApplicationStartFunction(){return await this.callApplicationMethod("start")}async callApplicationSetConfigFunction(){return await this.callApplicationMethod("setConfig")}async callApplicationMethod(t){let e=this.parent,i=this.appConfig,o=this.appStarter;if(!o[t])return this.bootConfig.debug&&console.warn(t,"not found in",o);const n=Object.assign(i,{container:i.containerId});return o[t](n,e)}init(){this.initHostObject(),this.initAppStarter(),this.guessAppStarterIfNotFound(),this.guessAppDestroyIfNotFound()}initHostObject(){this.hostObject=this.iframe?this.iframe.contentWindow:window}initAppStarter(){const t=this.hostObject,e=this.bootConfig.name,i=a(e),o=t.sportdigi;if(o){const t=o[i];if(t){if(t.addEventListener)return this.appStarterImplemented=!0,this.appStarter=t;this.appStarterImplemented=!1}}const n=r(t,e||"")||s;this.appStarter={start:n}}guessAppStarterIfNotFound(){const t=this.appStarter.start,e=this.bootConfig.name,i=this.hostObject,o=this.bootConfig.appStarterName;if(t!==s||o)return;const n=a(e);this.appStarter=l(i,`sportdigi.${n}`)||{start:function(){console.log("App starter function not found. Try to set parameter `appStarterName`")}}}guessAppDestroyIfNotFound(){const t=this.appStarter.destroy,e=this.hostObject,i=this.bootConfig.name;if(t!==s)return;const o=a(i);this.appStarter.destroy=l(e,"AppStarter.destroy")||l(e,`DIGI.${i}.destroy`)||l(e,`sportdigi.${o}.destroy`)||function(){console.log("App starter destroy function not found.")}}destroy(){this.appStarter.destroy&&this.appStarter.destroy(),this.initProps()}}const H={server:"",sportPartner:"",userTypeId:2,isBetShop:!1,token:"-",timeZone:"",defaultLanguage:"",userId:"",globalSettings:null,requestFrame:null,translations:null,initialized:!1,resolved:!1,parent:[]};async function F(t){await async function(t){(function(t={}){Object.entries(t).forEach((([t,e])=>{H.hasOwnProperty(t)&&(H[t]=e)})),H.isBetShop&&(H.userTypeId=7),H.defaultLanguage=["language","defaultLanguage","l","lang"].map((e=>t[e])).find(Boolean);let e=H.server;e&&(e.endsWith("/")&&(e=e.slice(0,-1)),e.includes("//")&&(e=e.split("//")[1]),H.server=`https://${e}`,H.initialized=!0)})(t),k(),await async function(){const{userTypeId:t,server:e,sportPartner:i,parent:o}=H;let n="request-frame",a=document.getElementById(n);if(!a){a=document.createElement("iframe"),a.id=n,a.style.display="none";let s=`${e}/Tools/RequestHelper`;i&&(s=`${e}/${i}/Tools/RequestHelper`);let r="?";Array.isArray(o)&&o.length>0&&o.map((t=>{s=`${s}${r}parent=${t}`,"?"===r&&(r="&")})),s=`${s}${r}userTypeId=${t}`,a.src=s,await new Promise((t=>{["complete","loaded","interactive"].includes(document.readyState)?j(a,t):document.addEventListener("DOMContentLoaded",(()=>{j(a,t)}))}))}return H.requestFrame||(H.requestFrame=a),Promise.resolve()}();let{resolved:e,token:i}=H;e||(await async function(){const{defaultLanguage:t,userTypeId:e,parent:i}=H;let o={sender:"http-api",url:"/StaticContent/GlobalSettings.js",finalParams:{data:{l:t,userTypeId:e,parent:i},path:"StaticContent/GlobalSettings.js",method:"get",params:[["l","string"],["parent","string[]"],["userTypeId","byte?"]]}};await A(o).then((t=>{H.globalSettings=t}))}(),i&&"-"!==i&&await async function(){const{userId:t,token:e,defaultLanguage:i,timeZone:o,userTypeId:n}=H;let a={sender:"http-api",url:"/Account/Authorize",finalParams:{data:{partnerUserId:t,token:e,l:i,tz:o,userTypeId:n},path:"Account/Authorize",method:"get",params:[["partnerUserId","long?"],["userTypeId","byte?"],["token","string"],["l","string"],["tz","double"]]}};await A(a).then((t=>{H.globalSettings={...H.globalSettings,...t}}))}(),await async function(){const{globalSettings:{partner:t={},language:e={}}}=H;let i={sender:"http-api",url:"/StaticContent/Translations.js",finalParams:{data:{language:e.TwoLetterName,partnerId:t.Id},path:"StaticContent/Translations.js",method:"get",params:[["language","string"],["partnerId","int?"]]}};await A(i).then((t=>{H.translations=t}))}()),H.resolved=!0}(t)}function k(t=!1){if(!H.initialized)return;const{server:e}=H;if(t)return L(e);let i=sessionStorage.getItem("__sb_err_cnt__");i=parseInt(i),isNaN(i)&&(i=0),i<3&&fetch(e+"/Error/Check",{method:"GET",mode:"cors",credentials:"include"}).catch((()=>{sessionStorage.setItem("__sb_err_cnt__",++i),L(e)}))}function L(t){return location.href=t+"/Error/Validate?returnUrl="+encodeURIComponent(location.href)}function j(t,e){t.onload=function(){t.isSportFrameLoaded=!0,e()},document.body.appendChild(t)}async function A(t={}){return t.messageId=t.url+Math.random(),t.finalParams.headers={},new Promise(((e,i)=>{const o=t.messageId;let n=t=>{t.data&&"object"==typeof t.data&&"http-api-response"===t.data.sender&&t.data.messageId===o&&(window.removeEventListener("message",n),t.data.ok||i(t.data),e(t.data.res))};window.addEventListener("message",n),H.requestFrame.contentWindow.postMessage(t,"*")}))}const V=["EuropeanView","SimpleEast","Mobile"];let P={},U=null;class $ extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const t=document.createElement("div");let e=P[U];t.id=e.tagName,this.shadowRoot.append(t),e.appConfig.shadowRoot=this.shadowRoot,e.appConfig.containerId=null,e.appConfig.target=t}}const D=1280,N=["EuropeanView","LatinoView","AsianView","ModernView","Mobile","ESport"];let W=window.Bootstrapper;W||(W=class{constructor(t={}){this.init.apply(this,arguments)}static get version(){return i(147).version}static get Utils(){return t}static async bootLatinoView(t={},e={}){t.globalSettings.user&&t.globalSettings.user.UserSetting&&(t.globalSettings.user.UserSetting.OddFormat=0);const i=t.containerId,o=document.getElementById(i),n=m("div",{id:"latino-view-container-element"});Object.assign(n.style,{position:"relative",zIndex:"1",height:"100%"});const a=m("div",{id:"betslip-container-element"});Object.assign(a.style,{position:"fixed",width:"100%",bottom:"0",zIndex:"9999"}),o.appendChild(n),document.body.appendChild(a);const s={...t,apps:[{appConfig:{...t,containerId:n.id},bootConfig:{...e,name:"LatinoView"},method:`${e.method}Base`,listen:{Betslip:{navigateToEvent:(t,{data:e})=>{t.dispatch("navigateToEvent",e)},openBetHistory:(t,{})=>{t.dispatch("openBetHistory",null)},betSlipUpdate:(t,{data:e})=>{t.dispatch("betSlipUpdate",e)},login:()=>{t.login()},placeBetSuccess:(t,{data:e})=>{t.dispatch("placeBetSuccess",e)},sportAppMessage:(t,{data:e})=>{t.dispatch("sportAppMessage",e)}}}},{appConfig:{container:a,width:360,maxHeight:.8*window.innerHeight,minHeight:200,closeModeVariant:0,animated:!0,bookBetHide:!0,position:t.globalSettings.partner.BetslipPosition,viewType:6},bootConfig:{name:"Betslip"},method:"bootIframe",listen:{Betslip:{navigateToEvent:t=>{t.dispatch("closeBetSlip",null)},login:t=>{t.dispatch("closeBetSlip",null)}},LatinoView:{toggleStake:(t,{data:e})=>{t.dispatch("toggleStake",e)},updateUserBalance:(t,{data:e})=>{t.dispatch("updateUserBalance",e)},chequeRedactOrder:(t,{data:e})=>{t.dispatch("chequeRedactOrder",e)},repeatTheBet:(t,{data:e})=>{t.dispatch("repeatTheBet",e)},loadExpressOfTheDay:(t,{data:e})=>{t.dispatch("loadExpressOfTheDay",e)},clearBetSlip:t=>{t.dispatch("clearBetSlip")},bookBet:(t,{data:e})=>{t.dispatch("loadBookedBet",e)},openBetSlip:t=>{t.dispatch("openBetSlip",null)},closeBetSlip:t=>{t.dispatch("closeBetSlip",null)},updateOddFormat:(t,{data:e})=>{t.dispatch("updateOddFormat",e)},setSportTournamentMode:(t,{data:e})=>{t.dispatch("setSportTournamentMode",e)},toggleBetSlipVisibility:(t,{data:e})=>{e?(t.dispatch("closeBetSlip",null),t.dispatch("hideCloseMode",null)):t.dispatch("showCloseMode",null)}}}}]};return await W.multiBoot(s,e.name,(()=>{n.remove(),a.remove()}))}static async bootTopMatches(t={},e={}){let i=t.containerId||t.target;i&&(i=i.replace("#",""));const o=document.getElementById(i),n=m("div",{id:"top-matches-container-element"});o.appendChild(n);let a=!1,s=null;const r={...t,apps:[{appConfig:{...t,containerId:n.id},bootConfig:{...e,name:"TopMatches"},method:`${e.method}Base`,listen:{Betslip:{navigateToEvent:(t,{data:e})=>{const{fullName:i,id:o}=e;t.dispatch("navigateToEventFromBetSlip",{Id:o,Name:i,Status:0})},placeBetSuccess:t=>{t.dispatch("placeBetSuccess",null)},open:()=>{a=!0},close:()=>{a=!1},betSlipUpdate:(t,{data:e})=>{if(clearTimeout(s),e.betSlip.IsBetPlaced)s=setTimeout((()=>{t.dispatch("updatedSelectedStakes",[])}),a?3e3:0);else{var i,o;let n=null===(i=e.betSlip)||void 0===i||null===(o=i.StakesList)||void 0===o?void 0:o.map((({StakeId:t})=>t));t.dispatch("updatedSelectedStakes",n||[])}},login:()=>{t.login()}}}}]};return await W.multiBoot(r,e.name,(()=>{n.remove()}))}static async bootBetShop(t={},e={}){t.globalSettings.user&&t.globalSettings.user.UserSetting&&(t.globalSettings.user.UserSetting.OddFormat=0);const i=[],{mirroringScriptUrl:o}=t;o&&i.push(o);const n=t.containerId,a=document.getElementById(n),s=m("div",{id:"bet-shop-container-element"});Object.assign(s.style,{position:"relative",zIndex:"1",height:"100%"});const r=m("div",{id:"betslip-container-element"});Object.assign(r.style,{position:"fixed",width:"100%",bottom:"0",zIndex:"9999"}),a.appendChild(s),document.body.appendChild(r);const l={...t,apps:[{appConfig:{...t,containerId:s.id},bootConfig:{...e,name:"BetShop"},method:`${e.method}Base`,listen:{Betslip:{navigateToEvent:(t,{data:e})=>{t.dispatch("navigateToEvent",e)},openBetHistory:(t,{})=>{t.dispatch("openBetHistory",null)},betSlipUpdate:(t,{data:e})=>{t.dispatch("betSlipUpdate",e)},login:()=>{t.login()},placeBetSuccess:(t,{data:e})=>{t.dispatch("placeBetSuccess",e)},sportAppMessage:(t,{data:e})=>{t.dispatch("sportAppMessage",e)}}}},{appConfig:{container:r,width:360,maxHeight:.8*window.innerHeight,minHeight:200,closeModeVariant:0,animated:!0,bookBetHide:!0,position:t.globalSettings.partner.BetslipPosition,viewType:10,scriptUrls:i,isBetShop:!0},bootConfig:{name:"Betslip"},method:"bootIframe",listen:{Betslip:{navigateToEvent:t=>{t.dispatch("closeBetSlip",null)},login:t=>{t.dispatch("closeBetSlip",null)}},BetShop:{toggleStake:(t,{data:e})=>{t.dispatch("toggleStake",e)},updateUserBalance:(t,{data:e})=>{t.dispatch("updateUserBalance",e)},chequeRedactOrder:(t,{data:e})=>{t.dispatch("chequeRedactOrder",e)},repeatTheBet:(t,{data:e})=>{t.dispatch("repeatTheBet",e)},loadExpressOfTheDay:(t,{data:e})=>{t.dispatch("loadExpressOfTheDay",e)},clearBetSlip:t=>{t.dispatch("clearBetSlip")},bookBet:(t,{data:e})=>{t.dispatch("loadBookedBet",e)},openBetSlip:t=>{t.dispatch("openBetSlip",null)},closeBetSlip:t=>{t.dispatch("closeBetSlip",null)},updateOddFormat:(t,{data:e})=>{t.dispatch("updateOddFormat",e)},toggleBetSlipVisibility:(t,{data:e})=>{e?(t.dispatch("closeBetSlip",null),t.dispatch("hideCloseMode",null)):t.dispatch("showCloseMode",null)}}}}]};return await W.multiBoot(l,e.name,(()=>{s.remove(),r.remove()}))}static async bootEuropeanView(t={},e={}){const i=t.target,o=m("div",{id:"european-view-container-element"});Object.assign(o.style,{position:"relative",zIndex:"1",height:"100%"});const n=m("div",{id:"betslip-container-element"});Object.assign(n.style,{position:"fixed",width:"100%",bottom:"0",zIndex:"9999"});const a=m("div",{id:"popups-container-element"});i.appendChild(o),document.body.appendChild(n),document.body.appendChild(a);const s={...t,apps:[{appConfig:{...t},bootConfig:{...e,name:"EuropeanView"},method:`${e.method}Base`,listen:{Betslip:{navigateToEvent:(t,{data:e})=>{t.dispatch("navigateToEvent",e)},betSlipUpdate:(t,{data:e})=>{t.dispatch("betSlipUpdate",e)},login:()=>{t.login()},placeBetSuccess:(t,{data:e})=>{t.dispatch("placeBetSuccess",e)},sportAppMessage:(t,{data:e})=>{t.dispatch("sportAppMessage",e)}}}},{appConfig:{container:n,width:360,maxHeight:.8*window.innerHeight,minHeight:200,closeModeVariant:0,animated:!0,bookBetHide:!0,position:t.globalSettings.partner.BetslipPosition,viewType:9},bootConfig:{name:"Betslip"},method:"bootIframe",listen:{Betslip:{navigateToEvent:t=>{t.dispatch("closeBetSlip",null)},login:t=>{t.dispatch("closeBetSlip",null)}},EuropeanView:{toggleStake:(t,{data:e})=>{t.dispatch("toggleStake",e)},updateUserBalance:(t,{data:e})=>{t.dispatch("updateUserBalance",e)},chequeRedactOrder:(t,{data:e})=>{t.dispatch("chequeRedactOrder",e)},repeatTheBet:(t,{data:e})=>{t.dispatch("repeatTheBet",e)},loadExpressOfTheDay:(t,{data:e})=>{t.dispatch("loadExpressOfTheDay",e)},bookBet:(t,{data:e})=>{t.dispatch("loadBookedBet",e)},openBetSlip:t=>{t.dispatch("openBetSlip",null)},closeBetSlip:t=>{t.dispatch("closeBetSlip",null)},updateOddFormat:(t,{data:e})=>{t.dispatch("updateOddFormat",e)},updateTimeFormat:(t,{data:e})=>{t.dispatch("updateTimeFormat",e)},setSportTournamentMode:(t,{data:e})=>{t.dispatch("setSportTournamentMode",e)},openSystemCalculator:t=>{t.dispatch("openSystemCalculator",null)},updateBetSlip:(t,e)=>{t.dispatch("updateBetSlip",e)},toggleBetSlipVisibility:(t,{data:e})=>{e?(t.dispatch("closeBetSlip",null),t.dispatch("hideCloseMode",null)):t.dispatch("showCloseMode",null)}}}}]};return await W.multiBoot(s,e.name,(()=>{o.remove(),n.remove()}))}static async bootModernView(t={},e={}){const i=t.containerId,o=document.getElementById(i),n=m("div",{id:"betslip-container-element"}),a=window.innerWidth>=D;document.body.appendChild(n);const s={container:n,width:360,maxHeight:.8*window.innerHeight,minHeight:200,height:null,closeModeVariant:0,animated:!0,position:t.globalSettings.partner.BetslipPosition,bookBetHide:!0,viewType:8};a||Object.assign(s,{width:null,maxHeight:null,minHeight:null,height:window.innerHeight,closeModeVariant:1,animated:!1,position:3,borderRadius:0,isMobile:!0});const r=m("div",{id:"modern-view-container-element"});let l=600;l=a?Math.max(l,window.innerHeight-o.getBoundingClientRect().top)+"px":null,Object.assign(r.style,{position:"relative",zIndex:"10",height:l}),Object.assign(n.style,{position:"fixed",width:"100%",bottom:"0",zIndex:"9999"}),o.appendChild(r),document.body.appendChild(n);const d={...t,apps:[{appConfig:{...t,containerId:r.id},bootConfig:{...e,name:"ModernView"},method:`${e.method}Base`,listen:{Betslip:{navigateToEvent:(t,{data:e})=>{t.dispatch("navigateToEvent",e)},openBetHistory:(t,{})=>{t.dispatch("openBetHistory",null)},betSlipUpdate:(t,{data:e})=>{t.dispatch("betSlipUpdate",e)},login:()=>{t.login()},placeBetSuccess:(t,{data:e})=>{t.dispatch("placeBetSuccess",e)},sportAppMessage:(t,{data:e})=>{t.dispatch("sportAppMessage",e)}}}},{appConfig:s,bootConfig:{name:"Betslip"},method:"bootIframe",listen:{Betslip:{navigateToEvent:t=>{t.dispatch("closeBetSlip",null)},login:t=>{t.dispatch("closeBetSlip",null)}},ModernView:{toggleStake:(t,{data:e})=>{t.dispatch("toggleStake",e)},setSportTournamentMode:(t,{data:e})=>{t.dispatch("setSportTournamentMode",e)},updateUserBalance:(t,{data:e})=>{t.dispatch("updateUserBalance",e)},chequeRedactOrder:(t,{data:e})=>{t.dispatch("chequeRedactOrder",e)},repeatTheBet:(t,{data:e})=>{t.dispatch("repeatTheBet",e)},loadExpressOfTheDay:(t,{data:e})=>{t.dispatch("loadExpressOfTheDay",e)},bookBet:(t,{data:e})=>{t.dispatch("loadBookedBet",e)},openBetSlip:t=>{t.dispatch("openBetSlip",null)},closeBetSlip:t=>{t.dispatch("closeBetSlip",null)},openSystemCalculator:t=>{t.dispatch("openSystemCalculator",null)},updateOddFormat:(t,{data:e})=>{t.dispatch("updateOddFormat",e)},updateTimeFormat:(t,{data:e})=>{t.dispatch("updateTimeFormat",e)},clearBetSlip:t=>{t.dispatch("clearBetSlip")},changePageMode:(t,{data:e})=>{if("-"===e)return;const i="DESKTOP"===e,o=i?0:1,n=i?320:null;t.dispatch("updateCloseModeVariant",o),t.dispatch("updateWidth",n)},toggleBetSlipVisibility:(t,{data:e})=>{e?(t.dispatch("closeBetSlip",null),t.dispatch("hideCloseMode",null)):t.dispatch("showCloseMode",null)}}}}]};return await W.multiBoot(d,e.name,(()=>{r.remove(),n.remove()}))}static async bootBetSlip(t,e={}){const i="betslip-root-inner",o=document.getElementById(i);o&&o.remove();const n=m("div",{id:i}),a=t.container instanceof HTMLElement?t.container:document.body,s=t.position,r=t.globalSettings.language.IsRTL,l={1:r?{right:"0"}:{left:"0"},2:{left:"50%",transform:"translateX(-50%)",transition:"all 1s ease 0s"},3:r?{left:"0"}:{right:"0"}}[{center:2,right:3,left:1}[s]||3]||{};let d={position:"absolute",bottom:"0",width:("number"==typeof t.width?`${t.width}px`:t.width)||"100%",overflow:"hidden",...l};Object.assign(n.style,d),W.Utils.appendChild(a,n);const p={closed:1990,opened:1990,fullOpened:1990};var c,h,g;null!=t&&t.zIndex&&(p.closed=(null===(c=t.zIndex)||void 0===c?void 0:c.closed)||p.closed,p.opened=(null===(h=t.zIndex)||void 0===h?void 0:h.opened)||p.opened,p.fullOpened=(null===(g=t.zIndex)||void 0===g?void 0:g.fullOpened)||p.fullOpened);const u=Object.assign(t,{maxHeight:t.isMobile||t.maxHeight?t.maxHeight:.8*window.innerHeight,minHeight:t.isMobile||t.minHeight?t.minHeight:200,containerId:i,zIndex:p,betSlipRootStyle:d}),f=Object.assign(e,{name:"Betslip"}),b=await W.bootIframeBase(u,f,{height:"1"});let v=t.closeModeVariant;return b.addEventListener("updateCloseModeVariant",(({data:t})=>{v=t})),b.addEventListener("sizeChange",(({data:t})=>{b.iframe.style.height=`${t.height}px`,b.dispatch("opacity",1),window.innerWidth>=D&&Object.assign(n.style,d)})),b.addEventListener("open",(({data:t})=>{const e="single",i=(null==t?void 0:t.betSlipMode)||e;a.style.zIndex=i===e?p.opened:p.fullOpened,1===v&&Object.assign(n.style,d)})),b.addEventListener("close",(()=>{a.style.zIndex=p.closed,1===v&&Object.assign(n.style,{width:"120px",bottom:"140px"}),window.innerWidth>=D&&Object.assign(n.style,d)})),b.addEventListener("downloadImage",(({data:t})=>{const e=null==t?void 0:t.blobData,i=null==t?void 0:t.fileName,o=window.URL.createObjectURL(e),n=new Image;n.crossOrigin="Anonymous",n.src=o,document.body.appendChild(n);const a=document.createElement("a");a.href=n.src,a.download=i,a.click(),document.body.removeChild(n)})),b}static async bootAsianViewWithNewBetslip(t={},e={}){const i=t.containerId,o=document.getElementById(i),n=m("div",{id:"asian-view-container"}),a=m("div",{id:"betslip-container"});Object.assign(n.style,{position:"relative",zIndex:"1"}),Object.assign(a.style,{position:"fixed",width:"90%",bottom:"0",zIndex:"2"}),o.appendChild(n),document.body.appendChild(a);const s={...t,communication:[{from:"Betslip",to:"AsianView",eventFrom:"showQuickDepositPopUp",eventTo:(t,e)=>t.starter.dispatchEvent("showQuickDepositPopUp",e)},{from:"Betslip",to:"AsianView",eventFrom:"lowMoney",eventTo:(t,e)=>t.starter.dispatchEvent("lowMoney",e)},{from:"Betslip",to:"AsianView",eventFrom:"login",eventTo:"login"},{from:"Betslip",to:"AsianView",eventFrom:"betSlipUpdate",eventTo:"betSlipUpdate"},{from:"Betslip",to:"AsianView",eventFrom:"navigateToEvent",eventTo:"navigateToEvent"},{from:"Betslip",to:"AsianView",eventFrom:"placeBetSuccess",eventTo:"placeBetSuccess"},{from:"Betslip",to:"AsianView",eventFrom:"openBetHistory",eventTo:"openBetHistory"},{from:"AsianView",to:"Betslip",eventFrom:"toggleStake",eventTo:"toggleStake"},{from:"AsianView",to:"Betslip",eventFrom:"chequeRedactOrder",eventTo:"chequeRedactOrder"},{from:"AsianView",to:"Betslip",eventFrom:"repeatTheBet",eventTo:"repeatTheBet"},{from:"AsianView",to:"Betslip",eventFrom:"updateUserBalance",eventTo:"updateUserBalance"},{from:"AsianView",to:"Betslip",eventFrom:"updateOddFormat",eventTo:"updateOddFormat"},{from:"AsianView",to:"Betslip",eventFrom:"toggleBetSlipVisibility",eventTo:(t,e)=>{e?(t.dispatch("closeBetSlip",null),t.dispatch("hideCloseMode",null)):t.dispatch("showCloseMode",null)}}],apps:[{appConfig:{...t,containerId:n.id,newBetSlip:!0},bootConfig:{...e,name:"AsianView",newBetSlip:!1},method:e.method||"boot"},{appConfig:{container:a,width:400,maxHeight:.7*window.innerHeight,position:t.globalSettings.partner.BetslipPosition,bookBetHide:!0,formattingOnlySingleMode:!0,preventFormattingSpecialMarkets:!0,viewType:2},bootConfig:{name:"Betslip"},method:"bootIframe"}]};return await W.multiBoot(s,e.name,(()=>{o.remove()}))}static async bootMobileWithNewBetslip(t={},e={}){const i=t.target,o=m("div",{id:"root-element",style:"height: 100%"}),n=m("div",{id:"mobile-container-element"});Object.assign(n.style,{position:"relative",zIndex:"1"});const a=m("div",{id:"betslip-container-element"});Object.assign(a.style,{position:"fixed",width:"100%",bottom:"0",zIndex:"1990"}),o.appendChild(n),document.body.appendChild(a),i.appendChild(o);const s={...t,communication:[{from:"Betslip",to:"Mobile",eventFrom:"toggleTournamentWallet",eventTo:"toggleTournamentTab"},{from:"Betslip",to:"Mobile",eventFrom:"navigateToEvent",eventTo:"navigateToEvent"},{from:"Betslip",to:"Mobile",eventFrom:"login",eventTo:"login"},{from:"Betslip",to:"Mobile",eventFrom:"showQuickDepositPopUp",eventTo:"showQuickDepositPopUp"},{from:"Betslip",to:"Mobile",eventFrom:"openBetHistory",eventTo:"openBetHistory"},{from:"Betslip",to:"Mobile",eventFrom:"bookBet",eventTo:"showBookBet"},{from:"Betslip",to:"Mobile",eventFrom:"lowMoney",eventTo:"lowMoney"},{from:"Betslip",to:"Mobile",eventFrom:"placeBetSuccess",eventTo:"getUserBalance"},{from:"Betslip",to:"Betslip",eventFrom:"navigateToEvent",eventTo:"closeBetSlip"},{from:"Betslip",to:"Betslip",eventFrom:"login",eventTo:"closeBetSlip"},{from:"Betslip",to:"Betslip",eventFrom:"openBetHistory",eventTo:"closeBetSlip"},{from:"Betslip",to:"Betslip",eventFrom:"showBetHistoryPopUp",eventTo:"closeBetSlip"},{from:"Betslip",to:"Betslip",eventFrom:"bookBet",eventTo:"closeBetSlip"},{from:"Betslip",to:"Mobile",eventFrom:"sizeChange",eventTo:"sizeChange"},{from:"Mobile",to:"Betslip",eventFrom:"addStake",eventTo:"toggleStake"},{from:"Mobile",to:"Betslip",eventFrom:"betSlipClicked",eventTo:"openBetSlip"},{from:"Mobile",to:"Betslip",eventFrom:"removeStake",eventTo:"toggleStake"},{from:"Mobile",to:"Betslip",eventFrom:"chequeRedactOrder",eventTo:"chequeRedactOrder"},{from:"Mobile",to:"Betslip",eventFrom:"loadExpressOfTheDay",eventTo:"loadExpressOfTheDay"},{from:"Mobile",to:"Betslip",eventFrom:"tournamentToggle",eventTo:"setSportTournamentMode"},{from:"Mobile",to:"Betslip",eventFrom:"bookBet",eventTo:"loadBookedBet"},{from:"Mobile",to:"Betslip",eventFrom:"changeOddFormat",eventTo:"updateOddFormat"},{from:"Mobile",to:"Betslip",eventFrom:"changeTimeFormat",eventTo:"updateTimeFormat"},{from:"Mobile",to:"Betslip",eventFrom:"updateUserBalance",eventTo:"updateUserBalance"},{from:"Betslip",to:"Mobile",eventFrom:"betSlipUpdate",eventTo:(t,e)=>t.dispatch("updateBetSlip",e.betSlip)},{from:"Mobile",to:"Betslip",eventFrom:"repeatTheBet",eventTo:(t,e)=>t.dispatch("repeatTheBet",{betnumber:e.checknumber,gameType:e.gameType})},{from:"Mobile",to:"Betslip",eventFrom:"resize",eventTo:t=>t.dispatch("updateHeight",window.innerHeight)},{from:"Mobile",to:"Betslip",eventFrom:"betSlipPinVisibility",eventTo:(t,e)=>t.dispatch(e?"showCloseMode":"hideCloseMode",null)},{from:"Mobile",to:"Betslip",eventFrom:"openSystemCalculator",eventTo:t=>{t.dispatch("openSystemCalculator",null),t.dispatch("closeBetSlip",null),t.dispatch("openBetSlip",null)}},{from:"Mobile",to:"Betslip",eventFrom:"networkAvailability",eventTo:(t,e)=>{e?t.dispatch("showCloseMode",null):(t.dispatch("closeBetSlip",null),t.dispatch("hideCloseMode",null))}}],apps:[{appConfig:{...t},bootConfig:{...e,name:"Mobile",newBetSlip:!1},method:"bootWebComponentBase"},{appConfig:{container:a,height:window.innerHeight,animated:!1,borderRadius:0,position:3,isMobile:!0,closeModeVariant:t.bottomNavBar?2:1,viewType:"asian"===t.view?2:1,applicationType:3},bootConfig:{name:"Betslip"},method:"bootIframe"}]},r=await W.multiBoot(s,e.name,(()=>{n.remove(),a.remove()}));return r.Betslip.addEventListener("open",(({data:t})=>{"standard"===t.betSlipMode&&(()=>{const t=document.body,e={position:t.style.position,top:t.style.top,right:t.style.right,bottom:t.style.bottom,left:t.style.left},i=()=>{w(t,e),r.Betslip.removeEventListener("close",i)};Object.assign(t.style,{position:"fixed",top:0,right:0,bottom:0,left:0}),r.Betslip.addEventListener("close",i)})()})),r.Betslip.dispatch("updateHeight",window.innerHeight),r}static async bootESport(t={},e={}){const i=t.containerId,o=document.getElementById(i),n=window.innerWidth>=D,a=m("div",{id:"e-sport-container-element"}),s=m("div",{id:"betslip-container-element"});Object.assign(a.style,{position:"relative",zIndex:"1"}),Object.assign(s.style,{position:"fixed",width:"100%",bottom:"0",zIndex:"1990",right:"0"}),o.appendChild(a),document.body.appendChild(s);const r={container:s,width:360,maxHeight:.8*window.innerHeight,minHeight:200,height:null,closeModeVariant:0,animated:!0,position:t.globalSettings.partner.BetslipPosition,bookBetHide:!0,viewType:5};n||Object.assign(r,{width:null,maxHeight:null,minHeight:null,height:window.innerHeight,closeModeVariant:1,animated:!1,position:3,borderRadius:0,isMobile:!0});const l={...t,apps:[{appConfig:{...t,containerId:a.id,newBetSlip:!0},bootConfig:{...e,name:"ESport",newBetSlip:!1},method:e.method+"Base",listen:{Betslip:{navigateToEvent:(t,{data:e})=>{t.dispatch("navigateToEvent",e)},betSlipUpdate:(t,{data:e})=>{t.dispatch("betSlipUpdate",e)},showQuickDepositPopUp:(t,{data:e})=>{t.dispatch("showQuickDepositPopUp",e)},openBetHistory:t=>{t.dispatch("openBetHistory",null)},login:()=>{let e=()=>{};"function"==typeof t.login?e=t.login:"function"==typeof t.loginTrigger&&(e=t.loginTrigger),e()},placeBetSuccess:(t,{data:e})=>{t.dispatch("placeBetSuccess",e)},sportAppMessage:(t,{data:e})=>{t.dispatch("sportAppMessage",e)}}}},{appConfig:r,bootConfig:{name:"Betslip"},method:"bootIframe",listen:{Betslip:{navigateToEvent:t=>{t.dispatch("closeBetSlip",null)},login:t=>{t.dispatch("closeBetSlip",null)}},ESport:{toggleStake:(t,{data:e})=>{t.dispatch("toggleStake",e)},repeatTheBet:(t,{data:e})=>{t.dispatch("repeatTheBet",e)},chequeRedactOrder:(t,{data:e})=>{t.dispatch("chequeRedactOrder",e)},resize:(t,{data:e})=>{if(n)return;const i=e&&e.height||window.innerHeight;t.dispatch("updateHeight",i)},updateUserBalance:(t,{data:e})=>{t.dispatch("updateUserBalance",e)},updateOddFormat:(t,{data:e})=>{t.dispatch("updateOddFormat",e)},updateTimeFormat:(t,{data:e})=>{t.dispatch("updateTimeFormat",e)},openBetSlip:(t,{data:e})=>{t.dispatch("openBetSlip",e)},setSportTournamentMode:(t,{data:e})=>{t.dispatch("setSportTournamentMode",e)},closeBetSlip:t=>{t.dispatch("closeBetSlip",null)},toggleBetSlipVisibility:(t,{data:e})=>{e?(t.dispatch("closeBetSlip",null),t.dispatch("hideCloseMode",null)):t.dispatch("showCloseMode",null)},changePageMode:(t,{data:e})=>{if("-"===e)return;const i="DESKTOP"===e,o=i?0:1,n=i?320:null;t.dispatch("updateCloseModeVariant",o),t.dispatch("updateWidth",n)}}}}]},d=await W.multiBoot(l,e.name,(()=>{s.remove(),a.remove()}));if(!n){const t=()=>{d.Betslip.dispatch("updateHeight",window.innerHeight)};window.addEventListener("resize",t),window.addEventListener("touchend",t),t()}return d}static async multiBoot(t,e,i){return new Promise((async o=>{let{server:n,apps:a=[],communication:s=[]}=t;t.globalSettings||(t.isBetShop="BetShop"===e,await F(t),t.globalSettings=H.globalSettings,t.translations=H.translations,t.apps.forEach((t=>{t.bootConfig.newBetSlip=!H.globalSettings.partner.EnableOldBetSlip}))),a=T(t);const r={},l={},d={};let p=0;a.forEach((c=>{const{appConfig:h,bootConfig:m,iframeConfig:g,method:u,instanceName:f}=c,b=Object.assign({server:n},t,h),v=W[u](b,m,g),B=m.name;v.then((t=>{r[f||B]=t,s.forEach((e=>{const{from:i,eventFrom:o,to:n,eventTo:a}=e;i===B&&t.addEventListener(o,(e=>{const{data:o}=e;l[i]&&(l[i].forEach((e=>e(t))),l[i]=[]);const s=W.createMultiBootEventToBehavior({eventTo:a,data:o});r[n]?s(r[n]):(l[n]||(l[n]=[]),l[n].push(s))}))})),d[B]&&d[B].forEach((({callback:e,data:i})=>{e(t,i)})),a.forEach((e=>{const i=(e.listen||{})[B];i&&Object.entries(i).map((([i,o])=>{const n=e.instanceName||e.bootConfig.name;t.addEventListener(i,(t=>{r[n]?o(r[n],t):(d[n]||(d[n]=[]),d[n].push({callback:o,data:t}))}))}))}))})).then((()=>{if(p++,a.length===p){const t=S(r,e,i);o(t)}}))}))}))}static createMultiBootEventToBehavior({eventTo:t,data:e}){const i=typeof t,o="string"===i,n="function"===i;return i=>o?i.dispatch(t,e):n?t(i,e):null}static create(){return new W}static async configure(){return W.createInstanceAndCall("configure",arguments)}static async setup(){return W.createInstanceAndCall("setup",arguments)}static async boot(t,e){let i=null;if(this.validateBootConfig(e),await W.initSettings(t,e),await W.initMaintenance(t,e,i))return;if(V.includes(e.name))return W.bootWebComponent(t,e);const o=this.getCustomBootFunction(t,e);return o?(i=await o(t,{...e,method:"boot"}),i):(i=await W.bootBase(t,e),i)}static async initMaintenance(t,e,i){if(N.includes(e.name))return setInterval((async()=>{await W.bootMaintenance(t,i)}),5e3),W.bootMaintenance(t,i)}static async initSettings(t,e){let{name:i}=e;t.globalSettings||(t.isBetShop="BetShop"===i,await F(t),t.server=H.server,t.globalSettings=H.globalSettings,t.translations=H.translations,e.newBetSlip=!t.globalSettings.partner.EnableOldBetSlip),"Mobile"===i&&"e-sport"===t.view&&(e.name="ESport")}static async bootBase(t,e){return W.createInstanceAndCall("boot",arguments)}static async bootIframe(t,e,i={}){let o=null;if(t.hashRouterDisabled=!0,await W.initSettings(t,e),await W.initMaintenance(t,e,o))return;if(V.includes(e.name))return W.bootWebComponent(t,e);const n=this.getCustomBootFunction(t,e);return n?(t.requestFrame=H.requestFrame,o=await n(t,{...e,method:"bootIframe"}),o):(o=await W.bootIframeBase(t,e,i),o)}static getBootableProjectsTypes(t={}){const e=t.name;return{projectIsESport:"ESport"===e,projectIsBetSlip:"Betslip"===e,projectIsMobile:"Mobile"===e,projectIsLatinoView:"LatinoView"===e,projectIsTopMatches:"TopMatches"===e,projectIsAsianView:"AsianView"===e,projectIsBetShop:"BetShop"===e,projectIsEuropeanView:"EuropeanView"===e,projectIsModernView:"ModernView"===e}}static validateBootConfig(t){const{projectIsBetSlip:e}=this.getBootableProjectsTypes(t);if(e){const e=`${t.name} project should be boot with bootIframe.`;throw new Error(e)}}static getCustomBootFunction(t,e){const{projectIsMobile:i,projectIsTopMatches:o,projectIsLatinoView:n,projectIsESport:a,projectIsBetSlip:s,projectIsBetShop:r,projectIsEuropeanView:l,projectIsModernView:d}=this.getBootableProjectsTypes(e);return{[i&&e.newBetSlip]:W.bootMobileWithNewBetslip,[a&&e.newBetSlip]:W.bootESport,[n]:W.bootLatinoView,[o&&e.newBetSlip]:W.bootTopMatches,[r]:W.bootBetShop,[s]:W.bootBetSlip,[l]:W.bootEuropeanView,[d]:W.bootModernView}.true||null}static async bootWebComponentBase(){return W.createInstanceAndCall("bootWebComponent",arguments)}static async bootIframeBase(){return W.createInstanceAndCall("bootIframe",arguments)}static async createInstanceAndCall(t,e){const i=new W;return await i[t].apply(i,e),i.starter.addEventListener("onHttpCallError",(t=>{403===t.status&&k(!0)})),i}initHeaderElement(){const t=(this.iframeConfig||{}).headerElement||{},e=t.clientHeight||0;this.headerElement=t,this.headerHeight=e}reset(){this.destroy()}initProps(){this.bootConfig=null,this.appConfig={},this.appBootableConfig={},this.headerElement=null,this.headerHeight=null,this.iframeConfig={},this.removeScrollListener=Function.prototype}async bootIframe(t,e,i={}){return await this.configure(t,e,i),this.initHeaderElement(),this.setupIframeHeightAsNum(),await this.createIframe({scriptUrls:t.scriptUrls||[]}),await this.setConfig(),await this.start(),this.startMessaging(),this}async bootWebComponent(t={},e={}){return t.isIframe=!1,this.destroy(),await this.configure(t,e),await this.load(),await this.setConfig(),await this.start(),this.startMessaging(),this}async createIframe(t={}){const{htmlTagAttrs:e="",containerAttrs:i="",scriptUrls:o=[]}=t,a={width:"100%",height:"1000px",frameborder:"0",allowfullscreen:"",allow:"autoplay",scrolling:"no"},s=this.appConfig,r=this.bootConfig,l=this.iframeConfig,d=this.configExtractor,p=s.containerId,c=r.name,h=d.links,m=d.scripts;o.length&&o.forEach((t=>{const e=document.createElement("script");e.src=t,m.push(e)}));const g=`\n            <!DOCTYPE html>\n            <html ${e} data-theme lang='en'>\n                <head>\n                <title>${c}</title>\n                    ${h.map((t=>t.outerHTML)).join("")}\n                </head>        \n                \n                <body>\n                    <div ${i} id='${p}'></div>                \n                    <div id='modals'></div>\n                    ${m.map((t=>t.outerHTML)).join("")}\n                </body>\n            </html>\n        `;(["AsianView","Mobile"].includes(c)||l.height)&&delete a.scrolling;const u=document.createElement("iframe"),f=Object.assign({},a,l);Object.entries(f).forEach((([t,e])=>u.setAttribute(t,e))),Object.assign(u.style,{width:0,"min-width":"100%","min-height":"",opacity:0,display:"block"});const b=document.getElementById(p)||document.createElement("div");if(!b)return console.warn(`Provided container id "${p}" is not in the DOM`);let v;if(n()){console.log("Safari detected"),b.appendChild(u);const t=u.contentDocument;t.open(),t.write(g),v=new Promise((e=>{t.addEventListener("DOMContentLoaded",(function i(){t.removeEventListener("DOMContentLoaded",i),e()}))})),t.close()}else u.srcdoc=g,b.appendChild(u),v=new Promise((t=>u.onload=t));await v,u.style.opacity="1",this.iframe=u,this.iframeContainer=b,this.appConfig.isIframe=!0,this.appConfig.iframe=u}async boot(t={},e={}){return t.isIframe=!1,this.destroy(),await this.configure(t,e),await this.load(),await this.setConfig(),await this.start(),this.startMessaging(),this}startMessaging(){this.dynamicallyChangeIframeDimensions(),this.dispatchParentBoundingBoxOnScroll()}navigateTo(t){this.dispatch("navigateTo",t)}dispatchParentBoundingBoxOnScroll(){if(!this.iframe)return;const t=()=>this.dispatchParentBoundingBox();window.addEventListener("scroll",t),this.removeScrollListener=()=>window.removeEventListener("scroll",t)}dispatchParentBoundingBox(){const t=this.getBoundingBoxes();this.dispatch("bounds",{bounds:t})}getBoundingBoxes(){const t=this.iframe,e=this.headerHeight,i=document.documentElement.getBoundingClientRect(),o=t.getBoundingClientRect();return{visibleArea:{bottom:i.bottom,height:i.height,left:i.left,right:i.right,top:i.top,width:i.width,x:i.x,y:i.y,windowInnerHeight:window.innerHeight},sportIframe:{bottom:o.bottom,height:o.height,left:o.left,right:o.right,top:o.top,width:o.width,x:o.x,y:o.y},headerHeight:e}}dynamicallyChangeIframeDimensions(){this.iframe&&this.addEventListener("changeDimensions",(t=>{t.sender&&(this.setIframeHeightWithLimit(t.data),this.dispatchParentBoundingBox())}))}setupIframeHeightAsNum(){const t=this.iframeConfig.height;if(!t)return;if("number"==typeof t)return this.iframeHeightAsNum=t;const e=`${t}`.match(/^[0-9]+/);this.iframeHeightAsNum=e&&+e[0]}setupMobileIframeHeight(){var t;if("Mobile"===(null===(t=this.bootConfig)||void 0===t?void 0:t.name)&&this.iframeConfig&&!this.iframeConfig.hasOwnProperty("height")){var e;const t=null===(e=this.iframe)||void 0===e?void 0:e.offsetTop;return window.innerHeight-t}}setIframeHeightWithLimit(t){const e=this.iframeHeightAsNum,i=t.height;let o=i>e?e:i;o=this.setupMobileIframeHeight()||o,this.setIframeHeight({height:o})}setIframeHeight(t){const e=this.iframe,i=t.height;+i&&(e.height=i+"px")}changeColors(t){this.dispatchColorsChange.apply(this,arguments)}dispatchColorsChange(t){this.dispatch("changeColors",{colors:t})}async setup(t,e){await this.configure(t,e),await this.load(),await this.setConfig()}async configure(t,e,i={}){return this.appConfig=t,this.iframeConfig=i,this.initBootConfig(e),await W.initSettings(this.appConfig,this.bootConfig),await this.initAppBootableConfig(),this.finalizeAppConfig(),this.appBootableConfig}async load(){return await this.loader.load(this.appBootableConfig),this}start(){return this.starter.start(this)}setConfig(){return this.starter.setConfig(this)}init(t){this.initDependencies(),this.initProps(t)}initDependencies(){this.configExtractor=new M,this.loader=new O,this.starter=new x,this.Utils=t}finalizeAppConfig(){const t=this.appConfig,{version:e,urlWithVersion:i}=this.configExtractor;g(t,{publicPath:`${i}/`,version:e})}async initAppBootableConfig(){this.appBootableConfig=await this.configExtractor.extract(this.appConfig,this.bootConfig)}initBootConfig(t={}){if(!t.name)throw new Error('Please provide application `name`, { name: "<APPLICATION NAME>" }');this.bootConfig=t}objToWindowOptions(t){return JSON.stringify(t).replace(/["{}]/g,"").replace(/:/g,"=")}addEventListener(t,e){return this.starter.addEventListener(t,e),this}removeEventListener(t,e){return this.starter.removeEventListener(t,e),this}dispatch(t,e){return this.starter.dispatchEvent(t,e),this}destroy(){H.resolved=!1,this.removeScrollListener(),this.initProps(),this.loader.destroy(),this.starter.destroy(),this.configExtractor.destroy(),this.iframe&&this.iframe.remove(),this.iframe=null}static async bootWebComponent(t,e){const i=document.getElementById(t.containerId),o=`sport-${a(e.name)}`,n=E();P[n]={appConfig:t,hash:n,tagName:o};let s=P[n];U=n,customElements.get(o)||customElements.define(o,$);let r=document.createElement(o);t=s.appConfig,i.append(r),this.validateBootConfig(e),await W.initSettings(t,e);const l=this.getCustomBootFunction(t,e);if(l)return l(t,{...e,method:"bootWebComponent"}).then((t=>(t.configExtractor.links.forEach((e=>{t.appConfig.shadowRoot.prepend(e)})),t)));const d=await W.bootBase(t,e);return d.configExtractor.links.forEach((t=>{s.appConfig.shadowRoot.prepend(t)})),d}static async bootMaintenance(t,e){var i,o;if(null===(i=t.globalSettings)||void 0===i||null===(o=i.publicApis)||void 0===o||!o.HealthCheckUrl)return;const n=t.globalSettings.publicApis.HealthCheckUrl;let a=!1;try{const t=await fetch(n);a=await t.json()}catch(t){return}const s=document.getElementById("jackpotHiddenContainer");if(a&&!this.maintenanceIframe){setTimeout((()=>{s&&s.remove()}),100),null==e||e.destroy();const i=`${t.server}/staticcontent`;this.maintenanceIframe=await W.bootMaintenanceIFrame(t,i)}return!a&&this.maintenanceIframe&&(this.maintenanceIframe.remove(),this.maintenanceIframe=null,location.reload()),this.maintenanceIframe}static async bootMaintenanceIFrame(t,e){const i={width:"100%",height:"1000px",frameborder:"0",allowfullscreen:"",allow:"autoplay",scrolling:"no",src:e},o=document.createElement("iframe"),n=Object.assign({},i);Object.entries(n).forEach((([t,e])=>o.setAttribute(t,e))),Object.assign(o.style,{display:"block",width:0,opacity:0,margin:0,"min-height":"","min-width":"100%"});const a=document.getElementById(t.containerId)||document.createElement("div");return a?(a.appendChild(o),o.style.opacity="1",o):console.warn(`Provided container id "${t.containerId}" is not in the DOM`)}});const z=W})(),o.default})()));